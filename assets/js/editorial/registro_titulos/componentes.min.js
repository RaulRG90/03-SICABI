var cabecera={crear_btn_group:function(b){let a=$("<div>",{"class":"btn-group ml-auto"});b.forEach(b=>{$(a).append($("<button>",{id:b.id,type:"button","class":"btn btn-secondary"}).text(b.valor))});return a},render:function(){let b=$("<div>",{"class":"container-fluid border"}),a=$("<div>",{"class":"row text-left ml-4 mt-4"}),c=$("<div>",{"class":"row text-right"}),d=$("<h2>",{"class":"display-6"}).text("Registro de t\u00edtulos");$(a).append(d);$(c).append(this.crear_btn_group([{id:"btn_ejemplo_etiquetas",
valor:"Ejemplo para etiquetas"},{id:"btn_titulos_registrados",valor:"Titulos registrados (Excel)"},{id:"btn_lista_oficial",valor:"Lista oficial T\u00edtulos Registrados"}]));$(b).append(a).append(c);return b}},btn_registrar_titulo={render(){return $("<button>",{id:"btn_registrar_titulo",type:"button","class":"btn btn-primary mt-4 mb-4"}).text("+ Registrar T\u00edtulo")}},tabla_titulos_registrados={render:function(){return $("<table>",{id:"tbl_titulos_registrados"})},habilitar_datatable:function(b,
a,c){$(b).DataTable({ajax:{url:`${a}${c}`,method:"GET",cache:"false",dataSrc:""},columns:[{data:"id",title:"Folio"},{data:"titulo",title:"T\u00edtulo"},{data:"id",title:"Editar",render:a=>`<button 
                                    id="btn_editar_titulo_${a}" 
                                    class="btn btn-secundary" 
                                    id_titulo="${a}">`+'<i class="fa fa-edit"></i></button>'},{data:"id",title:"Acuse",render:a=>`<a
                                    id="btn_descarga_acuse_${a}"
                                    class="btn btn-md btn-outline-success m-0 px-3 py-2 z-depth-0 waves-effect"
                                    href="${base_url}editorial/registro_titulos/crear_acuse/${a}"
                                    target="_blank">`+'<i class="fa fa-file"></i></a>'}],responsive:!0,dom:"f",language:{search:"Buscar"}})}},form_registro_titulos={data:"",datos_bibliograficos:{edi_id:{tipo:"hidden",atributos:{required:"required"},val:"",etiqueta:"Id de Editorial:"},titulo:{tipo:"text",atributos:{required:"required"},val:"",etiqueta:"T\u00edtulo:",placeholder:"Escribe el t\u00edtulo del libro"},titulo_original:{tipo:"text",atributos:null,val:"",etiqueta:"T\u00edtulo Original:",placeholder:"Escribe el t\u00edtulo en lengua original del libro"},
material:{tipo:"checkbox",atributos:null,val:["antologia","ilustrado"],etiqueta:"El material es:",etiqueta_checkbox:["Antolog\u00eda:","Ilustrado:"],placeholder:"Escribe el t\u00edtulo en lengua original del libro"},autor:{tipo:"btn_crear_seleccion",atributos:{required:"required"},val:"",etiqueta:"Autores:",placeholder:"Escribe el t\u00edtulo en lengua original del libro",modal:"mdl_agregar_autor",id:"aut_nombre",textos:["aut_nombre","aut_tipo"],tabla:"autores"},indice_titulo:{tipo:"textarea",atributos:null,
val:"",etiqueta:"Indice del t\u00edtulo:"},material_lengua_indigena:{tipo:"textarea",atributos:null,val:"",etiqueta:"Material en lengua indigena:"},sello_id:{tipo:"seleccion",atributos:{required:"required"},val:"",etiqueta:"Sello Editorial:",id:"sel_id",textos:["","sel_sello"],tabla:"sellos_editoriales"},edicion:{tipo:"text",atributos:{required:"required"},val:"",etiqueta:"Edici\u00f3n",placeholder:"Escribe la edici\u00f3n del libro"},anio:{tipo:"number",atributos:{required:"required"},val:"",etiqueta:"A\u00f1o:",
placeholder:"Escribe el a\u00f1o [xxxx] de edici\u00f3n del libro"},tiraje:{tipo:"number",atributos:{required:"required"},val:"",etiqueta:"Tiraje:",placeholder:"Escribe el tiraje del libro"},resenia:{tipo:"textarea",atributos:{required:"required"},val:"",etiqueta:"Rese\u00f1a:"},isbn:{tipo:"text",atributos:{required:"required"},val:"",etiqueta:"ISBN:",placeholder:"Escribe el ISBN del libro"},paginas_con_folio:{tipo:"text",atributos:{required:"required"},val:"",etiqueta:"P\u00e1ginas con folio:"},
pais:{tipo:"text",atributos:{required:"required"},val:"",etiqueta:"Pa\u00eds:"},ciudad:{tipo:"text",atributos:{required:"required"},val:"",etiqueta:"Ciudad:"},reconocimiento_libro:{tipo:"textarea",atributos:null,val:"",etiqueta:"Reconocimiento para el libro:"},reconocimiento_autor:{tipo:"textarea",atributos:null,val:"",etiqueta:"Reconocimiento para el autor:"},reconocimiento_ilustrador:{tipo:"textarea",atributos:null,val:"",etiqueta:"Reconocimiento para el ilustrador:"}},id_form:"form_registro",crear_cabecera:function(b){let a=
$("<header>",{id:this.id_form+"_header","class":"row bg-primary text-white mt-3"}),c=$("<h2>",{"class":"text-center"});$("<p>",{"class":"alert alert-danger text-center"});$(c).text(`Registro de t\u00edtulos - ${b}`);$(a).append(c);return a},crear_anuncios:function(){let b=$("<section>",{id:this.id_form+"_anuncios","class":"row"}),a=$("<p>",{"class":"display-5 mt-5 mb-3 mx-auto font-weight-bold"}).text("Los campos en negrita son obligatorios");$(b).append(a);return b},crear_datos_bibliograficos:function(){let b=
$("<section>",{id:this.id_form+"_datos_bibliograficos","class":"mx-10"});$.each(this.datos_bibliograficos,(a,c)=>{a=form_registro_titulos.crear_input_group(a,c);$(b).append(a)});return b},crear_input_group:function(b,a){let c=$("<div>",{"class":"input-group mb-3"}),d=$("<div>",{"class":"input-group-prepend"}),e=$("<span>",{"class":"input-group-text"}),f="",g=null!==a.atributos?!0:!1;"checkbox"===a.tipo?(b=this.crear_input_checkbox(a),$(c).addClass("border"),f=b):"textarea"===a.tipo?f=textarea=this.crear_input_textarea(b):
"btn_crear_seleccion"===a.tipo?(b=this.crear_input_btn_seleccion(b,a.tabla,a.id,a.textos),$(c).append(b.children(".input-group-prepend")),f=b.children(".custom-select")):f="seleccion"===a.tipo?this.crear_input_seleccion(b,a.tabla,a.id,a.textos):$("<input>",{"class":"form-control",type:a.tipo,id:`id_frm_${b}`});g&&(console.log(g),$.each(a.atributos,a=>{$(f).attr(a)}),null!==a.atributos.required&&$(e).addClass("font-weight-bold"));"hidden"!==a.tipo&&"btn_crear_seleccion"!==a.tipo&&($(e).text(a.etiqueta),
$(d).append(e),$(c).prepend(d));$(c).append(f);return c},crear_input_checkbox:function(b,a){$.each(b.etiqueta_checkbox,(a,d)=>{let c=$("<div>",{"class":"form-check form-check-inline mx-auto"}),f=`${form_registro_titulos.id_form}_check_${b.val[a]}`;a=$("<input>",{"class":"form-check-input",type:b.tipo,value:b.val[a],id:f});d=$("<label>",{"for":f,"class":"form-check-label"}).text(d);$(c).append(a).append(d);return c})},crear_input_textarea:function(b){return textarea=$("<textarea>",{"class":"form-control",
id:form_registro_titulos.id_form+"_"+b})},crear_input_btn_seleccion:function(b,a,c,d){let e=$("<div>");var f=b.substring(0,1).toUpperCase()+b.substring(1);let g=$("<div>",{"class":"input-group-prepend"});f=$("<button>",{"class":"btn btn-outline-secondary btn-md m-0 px-3 py-2 z-depth-0 dropdown-toggle",type:"button",id:`${this.id_form}_btn_agregar_${b}`,"data-toggle":"dropdown","aria-expanded":"false","aria-haspopup":"true"}).text(`${f}:`);var h=$("<a>",{id:`agregar_${b}`,"class":"dropdown-item","data-toggle":"modal",
"data-target":"#modal_form_autores"}).text("Agregar");let k=$("<a>",{id:`eliminar_${b}`,"class":"dropdown-item"}).text("Eliminar");h=$("<div>",{"class":"dropdown-menu"}).append(h).append(k);b=this.crear_input_seleccion(b,a,c,d);$(g).append(f).append(h);$(e).append(g).append(b);return e},crear_input_seleccion:function(b,a,c,d){let e=$("<select>",{"class":"custom-select",id:`${this.id_form}_${b}`});this.data[a].data.forEach(function(a){let b=$("<option>",{value:a[c]});$(b).text(`${void 0===a[d[0]]?
"":a[d[0]]+" | "}${a[d[1]]}`);$(e).append(b)});return e},card_create:function(b,a){let c=$("<div>",{"class":"card"}),d=$("<div>",{"class":"card-header",id:"header_"+a}),e=$("<h2>",{"class":"mb-0"});a=$("<button>",{"class":"btn btn-link btn-block text-left",type:"button","data-toggle":"collapse","data-target":"#"+a,"aria-expanded":"false","aria-controls":a});$(a).text(b);$(e).append(a);$(d).append(e);$(c).append(d);return c},input_custom_btn_create:function(b,a){let c=$("<div>",{"class":"input-group mb-3"}),
d=$("<div>",{"class":"input-group-prepend"});a=$("<button>",{"class":"btn btn-outline-secondary",type:"button",id:this.id_form+"_btn_agregar_autor","data-toggle":"modal","data-target":"#"+a});let e=$("<select>",{"class":"custom-select",id:this.id_form+"_"+b});$(a).text("Agregar Autor");$(d).append(a);this.data.autores.data.forEach(function(a){let b=$("<option>",{value:a.aut_id});$(b).text("["+a.aut_tipo+"] "+a.aut_nombre);$(e).append(b)});$(c).append(d);$(c).append(e);return c},form_obligatorios_create:function(){let b=
$("<div>",{id:"componentes_obligatorios"}),a=this.input_group_create("titulo","","T\u00edtulo",[{required:"required"}]),c=this.input_custom_btn_create("autores","modal_form_autores"),d=$("<ul>",{"class":"list-group",id:"list_autores_"+this.id_form});$(b).append(a);$(b).append(c);$(b).append(d);return b},body_create:function(b,a){b=$("<div>",{id:b,"class":"collapse show","aria-labelledby":"header_"+b,"data-parent":"#acordion_"+this.id_form});let c=$("<div>",{"class":"card-body"});$(c).append(a);$(b).append(c);
return b},accordeon_form_create:function(){let b=$("<div>",{role:"form","class":"accordion",id:"acordion_"+this.id_form}),a=$("<form>",{id:this.id_form}),c=this.card_create("Campos Obligatorios","campos_obligatorios"),d=this.card_create("Campos Opcionales","campos_opcionales"),e=this.body_create("campos_obligatorios",this.form_obligatorios_create());$(b).append(a);$(b).append(c).append(e).append(d);return b},render:function(){let b=$("<article>",{id:this.id_form,"class":"container-fluid border"}),
a=$("<form>");$(a).append(this.crear_datos_bibliograficos());$(b).append(this.crear_cabecera("Datos Bibliogr\u00e1ficos")).append(this.crear_anuncios()).append(a);return b}},form_autor={data:"",id_form:"form_autores",header_create:function(){let b=$("<div>",{id:this.id_form+"_header","class":"modal-header"}),a=$("<h5>",{"class":"modal-title"}),c=$("<button>",{"class":"close","data-dismiss":"modal","aria-label":"Cerrar"}),d=$("<span>",{"aria-hidden":!0});$(a).text("Agregar Autor");$(d).html("&times;");
$(b).append(a);$(c).append(d);$(b).append(c);return b},body_create:function(){let b=$("<div>",{"class":"modal-body"}),a=$("<form>",{id:this.id_form});var c={required:"required"};let d=this.group_select_create("tipo_autor",[{id:1,tipo:"Autor"},{id:2,tipo:"Antologado"},{id:3,tipo:"Ilustador"},{id:4,tipo:"Traductor"},{id:5,tipo:"Compilador"},{id:6,tipo:"Coordinador"},{id:7,tipo:"Adaptador"}],"Tipo de Autor",[c],"tipo","tipo");c={required:"required"};let e=this.input_group_create("nombre","","Nombre Completo",
[c]);c={required:"required"};c=this.group_select_create("pais_origen",this.data.paises.data,"Pa\u00eds de origen",[c],"pai_id","pai_pais");$(a).append(d);$(a).append(e);$(a).append(c);$(b).append(a);return b},footer_create:function(){let b=$("<div>",{"class":"modal-footer"}),a=$("<button>",{"class":"btn btn-secondary","data-dismiss":"modal"}),c=$("<button>",{"class":"btn btn-primary",type:"submit",form:this.id_form});$(a).text("Cerrar");$(c).text("Crear Autor");$(b).append(a);$(b).append(c);return b},
input_group_create:function(b,a,c,d,e="text"){let f=this.id_form,g=$("<div>",{"class":"input-group mb-3"}),h=$("<div>",{"class":"input-group-prepend"}),k=$("<span>",{"class":"input-group-text"}),l=$("<input>",{"class":"form-control",type:e,id:f+"_"+b});d.forEach(function(a){$(l).attr(a)});$(k).text(c);$(l).val(a);$(h).append(k);$(g).append(h).append(l);return g},group_select_create:function(b,a,c,d,e,f){let g=this.id_form,h=$("<div>",{"class":"input-group mb-3"}),k=$("<div>",{"class":"input-group-prepend"}),
l=$("<span>",{"class":"input-group-text"}),m=$("<select>",{"class":"custom-select",id:g+"_"+b});d.forEach(function(a){$(m).attr(a)});a.forEach(function(a){let b=$("<option>",{value:a[e]});$(b).text(a[f]);$(m).append(b)});$(l).text(c);$(k).append(l);$(h).append(k).append(m);return h},modal_form_create:function(){let b=$("<div>",{id:"modal_"+this.id_form,role:"form","class":"modal fade",tabindex:"-1","aria-hidden":"true"}),a=$("<div>",{"class":"modal-dialog"}),c=$("<div>",{"class":"modal-content"}),
d=this.header_create(),e=this.body_create(),f=this.footer_create();$(c).append(d);$(c).append(e);$(c).append(f);$(a).append(c);$(b).append(a);return b},render:function(){return this.modal_form_create()}},form_activacion_editorial={data:"",id_form:"form_activacion_editorial",desalertar:function(){this.estado.alertado=!1;this.estado.mensaje=""},alertar:function(b){this.estado.alertado=!0;this.estado.mensaje=b},estado:{alertado:!1,mensaje:""},header_create:function(){let b=$("<header>",{id:this.id_form+
"_header","class":"jumbotron"}),a=$("<h2>",{"class":"text-center"}),c=$("<p>",{"class":"alert alert-danger text-center"});$(a).text("Datos de editorial");$(b).append(a);this.estado.alertado&&($(c).text(this.estado.mensaje),$(b).append(c));return b},form_create:function(){let b=$("<form>",{id:this.id_form});var a={disabled:"disabled",required:"required"};let c=this.data.editorial.data[0].edi_razonsocial;c=this.group_input_create("razon_social",c,"Raz\u00f3n Social",[a]);a={required:"required"};let d=
this.data.editorial.data[0].edi_rfc;d=this.group_input_create("rfc",d,"R.F.C.",[a]);a={required:"required"};let e=this.data.editorial.data[0].edi_grupoedit;e=this.group_input_create("grupo_editorial",e,"Grupo Editorial",[a]);a={readonly:"readonly"};let f=this.data.sellos_editoriales.data,g="";f.forEach(a=>{g+=a.sel_sello+"\r\n"});f=this.group_textarea_create("sellos_editoriales",g,"Sellos Editoriales",[a]);a={readonly:"readonly"};let h=this.group_input_create("edicion_autor","No","Edici\u00f3n de Autor",
[a]);a={required:"required"};let k=this.data.editorial.data[0].edi_colonia;k=this.group_input_create("colonia",k,"Colonia",[a]);a={required:"required"};let l=this.data.editorial.data[0].edi_calle;l=this.group_input_create("calle",l,"Calle",[a]);a={required:"required"};let m=this.data.editorial.data[0].edi_numero;m=this.group_input_create("numero_exterior",m,"N\u00fam. Exterior e Interior",[a]);a={required:"required"};let n=this.data.editorial.data[0].edi_cp;n=this.group_input_create("cp",n,"C\u00f3digo postal",
[a],"number");a={required:"required"};let p=this.data.editorial.data[0].edi_ciudad;p=this.group_input_create("ciudad",p,"Ciudad",[a]);a={required:"required"};let q=this.data.paises.data;q=this.group_select_create("pais",q,"Pa\u00eds",[a],"pai_pais","pai_pais");a={};let w;w=this.group_input_create("entidad_federativa","","Entidad Federativa",[a]);a={};let x;x=this.group_input_create("del_mun","","Delegaci\u00f3n o Municipio",[a]);a={required:"required"};let y;y=this.group_input_create("telefono","",
"Tel\u00e9fono",[a]);a={required:"required"};let z;z=this.group_input_create("email","","Correo Electr\u00f3nico",[a],"email");let r=$("<fieldset>");a=$("<legend>");a.text("Representante/Titular");$(r).append(a);a={disabled:"disabled",required:"required"};let t=this.data.editorial.data[0].edi_repnombre;t=this.group_input_create("nombre_titular",t,"Nombre",[a]);a={disabled:"disabled",required:"required"};let u=this.data.editorial.data[0].edi_repcargo;u=this.group_input_create("cargo_titular",u,"Cargo del Representante",
[a]);a={disabled:"disabled"};let v=this.data.editorial.data[0].edi_observaciones;v=this.group_textarea_create("observaciones",v,"Detalles",[a]);$(r).append(t).append(u).append(v);$(b).append(c);$(b).append(d);$(b).append(e);$(b).append(f);$(b).append(h);$(b).append(k);$(b).append(l);$(b).append(m);$(b).append(n);$(b).append(p);$(b).append(q);$(b).append(w);$(b).append(x);$(b).append(y);$(b).append(z);$(b).append(r);return b},group_input_create:function(b,a,c,d,e="text"){let f=this.id_form,g=$("<div>",
{"class":"input-group mb-3"}),h=$("<div>",{"class":"input-group-prepend"}),k=$("<span>",{"class":"input-group-text"}),l=$("<input>",{"class":"form-control",type:e,id:f+"_"+b});d.forEach(function(a){$(l).attr(a)});$(k).text(c);$(l).val(a);$(h).append(k);$(g).append(h).append(l);return g},group_select_create:function(b,a,c,d,e,f){let g=this.id_form,h=$("<div>",{"class":"input-group mb-3"}),k=$("<div>",{"class":"input-group-prepend"}),l=$("<span>",{"class":"input-group-text"}),m=$("<select>",{"class":"custom-select",
id:g+"_"+b});d.forEach(function(a){$(m).attr(a)});a.forEach(function(a){let b=$("<option>",{value:a[e]});$(b).text(a[f]);$(m).append(b)});$(l).text(c);$(k).append(l);$(h).append(k).append(m);return h},group_textarea_create:function(b,a,c,d){let e=this.id_form,f=$("<div>",{"class":"input-group mb-3"}),g=$("<div>",{"class":"input-group-prepend"}),h=$("<span>",{"class":"input-group-text"}),k=$("<textarea>",{"class":"form-control",id:e+"_"+b});d.forEach(function(a){$(k).attr(a)});$(h).text(c);$(k).val(a);
$(g).append(h);$(f).append(g).append(k);return f},modal_form_create:function(){let b=$("<div>",{role:"form"}),a=$("<div>",{"class":"modal-dialog modal-xl"}),c=$("<div>",{"class":"modal-content"}),d=$("<div>",{"class":"modal-header"}),e=$("<h5>",{"class":"modal-title"}),f=$("<h5>",{"class":"modal-body"}),g=$("<div>",{"class":"modal-footer"}),h=$("<button>",{"class":"btn btn-primary",type:"submit",form:this.id_form}),k=this.form_create();$(e).text("Datos de la editorial "+this.data.editorial.data[0].edi_razonsocial);
$(h).text("Guardar");$(d).append(e);$(f).append(k);$(g).append(h);$(c).append(d).append(f).append(g);$(a).append(c);$(b).append(a);return b},render:function(){let b=$("#contenedor_principal");$(b).append(this.header_create()).append(this.modal_form_create())}};