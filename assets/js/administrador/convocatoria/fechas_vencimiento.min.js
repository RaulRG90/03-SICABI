var componentes=base_url+"assets/js/administrador/convocatoria/fechas_vencimiento/componentes.min.js",api_leer_fechas_modulos=base_url+"administrador/convocatoria/leer_fechas_modulos",api_guardar_fechas_modulos=base_url+"administrador/convocatoria/guardar_fechas_modulos",api_leer_historial_cambios=base_url+"administrador/convocatoria/leer_historial_cambios",componente_cabecera,componente_frm_fechas,componente_modal_historial_cambios,datos={};
$(document).ready(function(){function e(a,b){$.ajax({url:a,type:"GET",dataType:"JSON",async:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(a){datos[b]=a}})}function g(a){let b={};a.forEach(function(a){let c=a.nombre.toLowerCase().replace(/ /g,"_")+"_inicio_fecha",d=a.nombre.toLowerCase().replace(/ /g,"_")+"_fin_fecha",h={atributo:"fecha_fin_acceso",valor:a.fecha_fin_acceso},f={};f[c]={atributo:"fecha_inicio_acceso",valor:a.fecha_inicio_acceso};f[d]=h;b[a.id_modulo]=
f});b=JSON.stringify(b);sessionStorage.setItem("modulos",b)}function k(){let a=JSON.parse(sessionStorage.getItem("modulos")),b={},e=0;for(let c in a){let d={};d.id_modulo=c;for(let b in a[c])d[a[c][b].atributo]=a[c][b].valor;b[e++]=d}return b}sessionStorage.clear();e(api_leer_fechas_modulos,"modulos");e(api_leer_historial_cambios,"historial_cambios");$("#header").children().remove();$("#seccion_principal").children().remove();$("#footer").children().remove();(function(){$.ajax({async:!1,url:componentes,
dataType:"SCRIPT",success:function(){componente_cabecera=cabecera;componente_modal_historial_cambios=historial_cambios;componente_frm_fechas=frm_fechas}})})();$("#header").append(componente_cabecera.render());(function(){let a=$("#seccion_principal");g(datos.modulos);componente_frm_fechas.render(a,datos.modulos);$(".datepicker").pickadate({labelMonthNext:"Siguiente Mes",labelMonthPrev:"Anterior Mes",labelMonthSelect:"Selecciona un Mes",labelYearSelect:"Selecciona un A\u00f1o",selectMonths:!0,selectYears:!0,
monthsFull:"enero febrero marzo abril mayo junio julio agosto septiembre octubre noviembre diciembre".split(" "),monthsShort:"ene feb mar abr may jun jul ago sep oct nov dic".split(" "),weekdaysShort:"dom lun mar mi\u00e9 jue vie s\u00e1b".split(" "),weekdaysFull:"domingo lunes martes mi\u00e9rcoles jueves viernes s\u00e1bado".split(" "),today:"Hoy",clear:"Borrar",formatSubmit:"yyyy-mm-dd",format:"yyyy-mm-dd"})})();$("#footer").append(componente_modal_historial_cambios.render(datos.historial_cambios));
$(".datepicker").on("change",function(){let a=JSON.parse(sessionStorage.getItem("modulos"));a[$(this).attr("modulo")][$(this).attr("id")].valor=$(this).val();sessionStorage.setItem("modulos",JSON.stringify(a))});$("#frm_fechas").on("submit",function(a){a.preventDefault();a.stopPropagation();a=JSON.stringify(k());$.ajax({url:api_guardar_fechas_modulos,type:"POST",dataType:"JSON",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:"modulos="+a,success:function(a){a.error?swal("Error!",
a.error.message,"error"):swal("Exito!",a.message,"success")},error:function(a){swal("Error!","Error Interno, comuniquese con el administrador","error")}})})});