var componente_cabecera=base_url+"/assets/js/herramientas/jumbotron.min.js",componente_btn_descargar_excel=base_url+"/assets/js/herramientas/btn_success.min.js",componente_totales=base_url+"/assets/js/herramientas/smallbox.min.js",componente_conteo_diario=base_url+"/assets/js/herramientas/graph_bar.min.js",componente_modal_descarga_excel=base_url+"/assets/js/herramientas/modal.min.js",componente_tbl_descarga_excel=base_url+"/assets/js/administrador/acreditacion/reportes_acreditacion/tbl_descargas_excel.min.js",
api_leer_totales_acreditacion=base_url+"/administrador/acreditacion/leer_totales",api_leer_totales_dia_acreditacion=base_url+"/administrador/acreditacion/leer_totales_dia",api_descargar_reporte=base_url+"/administrador/acreditacion/crear_reporte",encabezado,btn_descargar_excel,totales,conteo_diario,modal_descargar_excel;
$(document).ready(function(){function g(){$.ajax({url:api_leer_totales_acreditacion,type:"GET",contentType:!1,processData:!1,cache:!1,success:function(a){a=JSON.parse(a);a.error?($("#totales_editorial h3").text(5),$("#totales_sellos h3").text(5)):($("#totales_editorial h3").text(a.editoriales[0].total_editoriales),$("#totales_sellos h3").text(a.sellos[0].total_sellos))},error:function(a){swal("Error!","Error desconocido, comuniquese con el administrador","error")}})}function f(a){let b=[];a.forEach(function(a){b.push({x:a.fecha_creacion,
y:a.total})});return b}$.getScript(componente_cabecera,function(){let a=$("#cabecera_principal");$(a).append(jumbotron.render("Monitoreo de Acreditaci\u00f3n de Editoriales"));encabezado=a});$.getScript(componente_btn_descargar_excel,function(){let a=$("#div_descargar_excel");$(a).append(btn_success.render("btn_descargar_excel","EXCEL DESCARGA"));btn_descargar_excel=a});$.getScript(componente_totales,function(){let a=$("#seccion_principal"),b=$("<div>",{"class":"container-fluid"}),c=$("<div>",{"class":"row"}),
d=$("<h2>");$(d).text("Total");$(c).append(smallbox.render("totales_editorial","col-lg-6",0,"Editoriales","fas fa-book-open"));$(c).append(smallbox.render("totales_sellos","col-lg-6",0,"Sellos","fas fa-stamp"));$(b).append(d).append(c);$(b).css({border:"solid"});$(a).append(b);totales=b;g()});$.ajax({url:api_leer_totales_dia_acreditacion,type:"GET",contentType:!1,processData:!1,cache:!1,success:function(a){a=JSON.parse(a);if(a.error)console.log(a);else{let b=f(a.editoriales);a=f(a.sellos);let c={},
d={};console.log(b);console.log(a);0<b.length&&(c.Editoriales=b);0<a.length&&(c.Sellos=a);d.Editoriales="rgba(255,99,132,0.2)";d.Sellos="rgba(54, 162, 235, 0.2)";$.getScript(componente_conteo_diario,function(){let a=$("#seccion_principal"),b=$("<h2>"),e=$("<div>",{"class":"container-fluid"});$(b).text("Conteo diario");$(e).append(b);$(e).append(graph_bar.render("conteo_diario",c,d));$(e).css({border:"solid","margin-top":"10px"});$(a).append(e);conteo_diario=e})}},error:function(a){swal("Error!","Error desconocido, comuniquese con el administrador",
"error")}});$.getScript(componente_modal_descarga_excel,function(){let a=$("#sand_box"),b;$.getScript(componente_tbl_descarga_excel,function(){b=tbl_descargas_excel.render();$(a).append(modal.render("mdl_descargas","Descarga de reportes",b))})});$(document).off("click","#btn_descargar_excel");$(document).on("click","#btn_descargar_excel",function(){$("#mdl_descargas").modal("show")})});