var componentes=base_url+"/assets/js/login/componentes.min.js",componente_login,api_leer_nombre_sistema=base_url+"/login/leer_nombre_sistema",api_iniciar_sesion=base_url+"/login/iniciar_sesion",datos={};
window.onload=function(){document.getElementById("out");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){var b=a.coords.latitude;a=a.coords.longitude;document.getElementById("inputlatitude").value=b;document.getElementById("inputlongitude").value=a;console.log(b,a)},function(){console.log("Unable to retrieve your location");document.getElementById("inputlatitude").value=0;document.getElementById("inputlongitude").value=0}):console.log("<p>Geolocation is not supported by your browser</p>")};
$(document).ready(function(){(function(a,b){$.ajax({url:a,type:"GET",dataType:"JSON",async:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(a){datos[b]=a}})})(api_leer_nombre_sistema,"nombre_sistema");$("#contenedor_principal").children().remove();(function(){$.ajax({async:!1,url:componentes,dataType:"SCRIPT",success:function(){componente_login=login}})})();$("#contenedor_principal").append(componente_login.render(datos.nombre_sistema));$(document).off("submit","#frm_login");
$(document).on("submit","#frm_login",function(){event.preventDefault();event.stopPropagation();if(!1===this.checkValidity())this.classList.add("was-validated");else{let a=$("#input_usuario").val(),b=$("#input_password").val(),c=$("#input_latitude").val(),d=$("#input_longitude").val();$.ajax({url:api_iniciar_sesion,type:"POST",dataType:"JSON",data:{usu_login:a,usu_pass:b,latitude:c,longitude:d},async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(a){console.log(a);
"aprobado"===a.estatus?(swal(a.mensaje,"\u00a1Acceso Correcto!","success"),location.href=base_url+"/"+a.permiso):swal("\u00a1Error!",a.mensaje,"error")},error:function(a){swal("\u00a1Error Desconocido!","Comuniquese con el administrador","error")}})}})});