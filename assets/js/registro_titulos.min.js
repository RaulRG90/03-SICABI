var base_url=window.location.protocol+"//"+window.location.host,api_leer_datos_activacion=base_url+"/editorial/registro/leer_datos_activacion",api_activar_editorial=base_url+"/editorial/registro/activar_editorial",api_leer_datos_registro_titulo=base_url+"/editorial/registro/leer_datos_registro_titulo",paises,estados,municipios;
$(document).ready(function(){let e=$("#editorial_estatus").val(),b=$("#editorial_folio").val();console.log(b);if("1"===e)$.ajax({url:api_leer_datos_registro_titulo,type:"POST",dataType:"JSON",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:"folio="+b,success:function(a){console.log(a);sessionStorage.setItem("autores",JSON.stringify([]));$.getScript(base_url+"/assets/js/registro_titulos/form_registro.js",function(){form_registro.data=a;form_registro.render()});$.getScript(base_url+
"/assets/js/registro_titulos/form_crear_autor.js",function(){form_autor.data=a;form_autor.render()});$(document).off("submit","#form_autores");$(document).on("submit","#form_autores",function(a){a.preventDefault();a.stopPropagation();a=$("#form_autores_tipo_autor").val();let c=$("#form_autores_nombre").val();$("#form_autores_pais_origen").val();JSON.parse(sessionStorage.getItem("autores"));let b=$("<option>"),d=$("<li>",{"class":"list-group-item"});$(b).text("["+a+"] "+c);$(d).text("["+a+"] "+c);
$("#form_registro_autores").append(b);$("#list_autores_form_registro").append(d);$("#modal_form_autores").modal("hide");$(this).trigger("reset")})},error:function(a){console.log(a)}});else{var f=function(){let a={},c=$("#form_activacion_editorial_rfc").val(),e=$("#form_activacion_editorial_grupo_editorial").val(),f=$("#form_activacion_editorial_colonia").val(),d=$("#form_activacion_editorial_calle").val(),g=$("#form_activacion_editorial_numero_exterior").val(),h=$("#form_activacion_editorial_cp").val(),
k=$("#form_activacion_editorial_ciudad").val(),l=$("#form_activacion_editorial_pais").val(),m=$("#form_activacion_editorial_entidad_federativa").val(),n=$("#form_activacion_editorial_del_mun").val(),p=$("#form_activacion_editorial_telefono").val(),q=$("#form_activacion_editorial_email").val();a.folio=b;a.edi_rfc=c;a.edi_grupoedit=e;a.edi_colonia=f;a.edi_calle=d;a.edi_numero=g;a.edi_cp=h;a.edi_ciudad=k;a.edi_pais=l;a.edi_entidad_federativa=m;a.edi_delegacion=n;a.edi_telefonos=p;a.edi_email=q;return a};
$.ajax({url:api_leer_datos_activacion,type:"POST",dataType:"JSON",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:"folio="+b,success:function(a){console.log(a);"success"===a.editorial.status&&"success"===a.sellos_editoriales.status&&"success"===a.paises.status&&"success"===a.estados.status&&"success"===a.municipios.status&&(paises=a.paises,estados=a.estados,municipios=a.municipios,$.getScript(base_url+"/assets/js/registro_titulos/form_activacion_editorial.js",function(){form_activacion_editorial.data=
a;form_activacion_editorial.alertar("Antes de iniciar con el registro de titulos debe validar los siguientes datos");form_activacion_editorial.render()}))},error:function(a){console.log(a,"error");document.write(a.responseText)}});$(document).off("submit","#form_activacion_editorial");$(document).on("submit","#form_activacion_editorial",function(a){a.preventDefault();a.stopPropagation();a=f();$.ajax({url:api_activar_editorial,type:"POST",dataType:"JSON",contentType:"application/x-www-form-urlencoded; charset=UTF-8",
data:a,success:function(a){"Editorial Activada"===a.message?swal("Exito!",a.message,"success"):swal("Error!",a.error.message,"error")},error:function(a){console.log(a)}})})}});